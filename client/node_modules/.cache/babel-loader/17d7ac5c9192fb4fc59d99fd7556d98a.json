{"ast":null,"code":"var _this=this;import React from\"react\";import{PostContext}from\"../../contexts/Postcontext\";import{useContext,useEffect}from\"react\";import{Spinner,Card,Button,Row,Col,OverlayTrigger,Tooltip,Toast}from\"react-bootstrap\";import{AuthContext}from\"../../contexts/index\";import SinglePost from\"../posts/SinglePost\";import AddpostModal from\"../posts/AddpostModal\";import AddIcon from\"../../assets/plus-circle-fill.svg\";import UpdatepostModal from'../posts/UpdatepostModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useContext=useContext(AuthContext),username=_useContext.authState.user.username;var _useContext2=useContext(PostContext),_useContext2$postStat=_useContext2.postState,posts=_useContext2$postStat.posts,postsLoading=_useContext2$postStat.postsLoading,post=_useContext2$postStat.post,getPosts=_useContext2.getPosts,SetshowAddPostModal=_useContext2.SetshowAddPostModal,_useContext2$showToas=_useContext2.showToast,show=_useContext2$showToas.show,message=_useContext2$showToas.message,type=_useContext2$showToas.type,SetshowToast=_useContext2.SetshowToast;//Start : Get all posts\nuseEffect(function(){return getPosts();},[]);var body=null;if(postsLoading){body=/*#__PURE__*/_jsx(\"div\",{className:\"spinner-container\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",variant:\"info\"})});}else if(posts.length==0){body=/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{className:\"text-center mx-5 my-5\",children:[/*#__PURE__*/_jsxs(Card.Header,{as:\"h1\",children:[\"Hi \",username]}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Welcome to my website\"}),/*#__PURE__*/_jsx(Card.Text,{children:\"Click the button below to track your first skill to learn\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:SetshowAddPostModal.bind(_this,true),children:\"Learn It\"})]})]})});}else{body=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{className:\"row-cols-1 row-cols-md-3 g-4 mx-auto mt-3\",children:posts.map(function(post){return/*#__PURE__*/_jsx(Col,{className:\"my-2\",children:/*#__PURE__*/_jsx(SinglePost,{post:post})},post._id);})}),/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"left\",overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Add a new thing to learn\"}),children:/*#__PURE__*/_jsx(Button,{className:\"btn-floating\",onClick:SetshowAddPostModal.bind(_this,true),children:/*#__PURE__*/_jsx(\"img\",{src:AddIcon,alt:\"Addicon\",width:\"60\",height:\"60\"})})})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Toast,{show:show,style:{position:\"fiexed\",top:\"20%\",right:\"10px\"},className:\"bg-\".concat(type,\" text-white float-left\"),onClose:SetshowToast.bind(_this,{show:false,message:'',type:null}),delay:3000,autohide:true,children:/*#__PURE__*/_jsx(Toast.Body,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",message,\" \"]})})}),body,/*#__PURE__*/_jsx(AddpostModal,{}),post!==null&&/*#__PURE__*/_jsx(UpdatepostModal,{})]});};export default Dashboard;","map":{"version":3,"sources":["/home/thanh/Desktop/Trackerlist/client/src/components/views/Dashboard.js"],"names":["React","PostContext","useContext","useEffect","Spinner","Card","Button","Row","Col","OverlayTrigger","Tooltip","Toast","AuthContext","SinglePost","AddpostModal","UpdatepostModal","Dashboard","username","authState","user","postState","posts","postsLoading","post","getPosts","SetshowAddPostModal","showToast","show","message","type","SetshowToast","body","length","bind","map","_id","AddIcon","position","top","right"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { PostContext } from \"../../contexts/Postcontext\";\nimport { useContext, useEffect } from \"react\";\nimport {\n  Spinner,\n  Card,\n  Button,\n  Row,\n  Col,\n  OverlayTrigger,\n  Tooltip,\n  Toast,\n} from \"react-bootstrap\";\nimport { AuthContext } from \"../../contexts/index\";\nimport SinglePost from \"../posts/SinglePost\";\nimport AddpostModal from \"../posts/AddpostModal\";\nimport AddIcon from \"../../assets/plus-circle-fill.svg\";\nimport UpdatepostModal from '../posts/UpdatepostModal'\n\nconst Dashboard = () => {\n  const {\n    authState: {\n      user: { username },\n    },\n  } = useContext(AuthContext);\n\n  const {\n    postState: { posts, postsLoading,post },\n    getPosts,\n    SetshowAddPostModal,\n    showToast: { show, message, type },\n    SetshowToast,\n  } = useContext(PostContext);\n\n  //Start : Get all posts\n  useEffect(() => getPosts(), []);\n  let body = null;\n  if (postsLoading) {\n    body = (\n      <div className=\"spinner-container\">\n        <Spinner animation=\"border\" role=\"status\" variant=\"info\" />\n      </div>\n    );\n  } else if (posts.length == 0) {\n    body = (\n      <>\n        <Card className=\"text-center mx-5 my-5\">\n          <Card.Header as=\"h1\">Hi {username}</Card.Header>\n          <Card.Body>\n            <Card.Title>Welcome to my website</Card.Title>\n            <Card.Text>\n              Click the button below to track your first skill to learn\n            </Card.Text>\n            <Button variant=\"primary\" onClick={SetshowAddPostModal.bind(this,true)}>Learn It</Button>\n          </Card.Body>\n        </Card>\n      </>\n    );\n  } else {\n    body = (\n      <>\n        <Row className=\"row-cols-1 row-cols-md-3 g-4 mx-auto mt-3\">\n          {posts.map((post) => {\n            return (\n              <Col key={post._id} className=\"my-2\">\n                <SinglePost post={post} />\n              </Col>\n            );\n          })}\n        </Row>\n\n        {/* Open Add Post Modal */}\n        <OverlayTrigger placement='left' overlay={<Tooltip>Add a new thing to learn</Tooltip>}>\n        <Button\n          className=\"btn-floating\"\n          onClick={SetshowAddPostModal.bind(this, true)}\n        >\n          <img src={AddIcon} alt=\"Addicon\" width=\"60\" height=\"60\" />\n        </Button>\n        </OverlayTrigger>\n      </>\n    );\n  }\n\n  return (\n    <>\n     <Toast\n        show={show}\n        style={{ position: \"fiexed\", top: \"20%\", right: \"10px\" }}\n        className={`bg-${type} text-white float-left`}\n        onClose={SetshowToast.bind(this,{show:false,message:'',type:null})}\n        delay={3000}\n        autohide\n      >\n        <Toast.Body>\n          <strong> {message} </strong>\n        </Toast.Body>\n      </Toast>\n      {body}\n      <AddpostModal />\n      {post !==null && <UpdatepostModal/>}\n      {/* After post is added ,show toast */}\n     \n    </>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}