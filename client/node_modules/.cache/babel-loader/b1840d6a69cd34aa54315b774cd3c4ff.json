{"ast":null,"code":"import _regeneratorRuntime from\"/home/thanh/Desktop/Trackerlist/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/thanh/Desktop/Trackerlist/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/thanh/Desktop/Trackerlist/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createContext,useReducer}from\"react\";import React from\"react\";import axios from\"axios\";import{apiUrl,POSTS_LOADED_SUCCESS,POSTS_LOADED_FAIL,ADD_POST,DELETE_POST,UPDATE_POST,FIND_POST}from\"./constants\";import{PostsReducer}from\"../reducers/PostsReducer\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var PostContext=/*#__PURE__*/createContext();var PostcontextProvider=function PostcontextProvider(_ref){var children=_ref.children;//State\nvar _useReducer=useReducer(PostsReducer,{post:null,posts:[],postsLoading:true}),_useReducer2=_slicedToArray(_useReducer,2),postState=_useReducer2[0],dispatch=_useReducer2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAddPostModal=_useState2[0],SetshowAddPostModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showUpdatePostModal=_useState4[0],SetshowUpdatePostModal=_useState4[1];var _useState5=useState({show:false,message:\"\",type:null}),_useState6=_slicedToArray(_useState5,2),showToast=_useState6[0],SetshowToast=_useState6[1];//GetAllPost\nvar getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(apiUrl,\"/posts\"));case 3:response=_context.sent;if(response.data.success){dispatch({type:POSTS_LOADED_SUCCESS,payload:response.data.posts});}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:POSTS_LOADED_FAIL});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getPosts(){return _ref2.apply(this,arguments);};}();//Add Post\nvar addPost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newPost){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(apiUrl,\"/posts\"),newPost);case 3:response=_context2.sent;if(!response.data.success){_context2.next=7;break;}dispatch({type:ADD_POST,payload:response.data.post});return _context2.abrupt(\"return\",response.data);case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",_context2.t0.response.data?_context2.t0.reponse.data:{success:false,message:\"Server error\"});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function addPost(_x){return _ref3.apply(this,arguments);};}();//Delete Post\nvar deletePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(PostID){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"\".concat(apiUrl,\"/posts/\").concat(PostID));case 3:response=_context3.sent;if(response.data.success){dispatch({type:DELETE_POST,payload:PostID});}_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function deletePost(_x2){return _ref4.apply(this,arguments);};}();//Find post when user is updating\nvar findPost=function findPost(PostID){var post=postState.posts.find(function(x){return x._id===PostID;});dispatch({type:FIND_POST,payload:post});};//Update Post\nvar updatePost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_updatePost){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.put(\"\".concat(apiUrl,\"/posts/\").concat(_updatePost._id),_updatePost);case 3:response=_context4.sent;if(!response.data.success){_context4.next=7;break;}dispatch({type:UPDATE_POST,payload:response.data.post});return _context4.abrupt(\"return\",response.data);case 7:_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);return _context4.abrupt(\"return\",_context4.t0.response.data?_context4.t0.reponse.data:{success:false,message:\"Server error\"});case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function updatePost(_x3){return _ref5.apply(this,arguments);};}();//Take away\nvar PostContextData={postState:postState,getPosts:getPosts,showAddPostModal:showAddPostModal,SetshowAddPostModal:SetshowAddPostModal,addPost:addPost,showToast:showToast,SetshowToast:SetshowToast,deletePost:deletePost,updatePost:updatePost,findPost:findPost,SetshowUpdatePostModal:SetshowUpdatePostModal,showUpdatePostModal:showUpdatePostModal};return/*#__PURE__*/_jsx(PostContext.Provider,{value:PostContextData,children:children});};export default PostcontextProvider;","map":{"version":3,"sources":["/home/thanh/Desktop/Trackerlist/client/src/contexts/Postcontext.js"],"names":["createContext","useReducer","React","axios","apiUrl","POSTS_LOADED_SUCCESS","POSTS_LOADED_FAIL","ADD_POST","DELETE_POST","UPDATE_POST","FIND_POST","PostsReducer","useState","PostContext","PostcontextProvider","children","post","posts","postsLoading","postState","dispatch","showAddPostModal","SetshowAddPostModal","showUpdatePostModal","SetshowUpdatePostModal","show","message","type","showToast","SetshowToast","getPosts","get","response","data","success","payload","addPost","newPost","reponse","deletePost","PostID","delete","console","log","findPost","find","x","_id","updatePost","put","PostContextData"],"mappings":"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","sourcesContent":["import { createContext, useReducer } from \"react\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport {\n  apiUrl,\n  POSTS_LOADED_SUCCESS,\n  POSTS_LOADED_FAIL,\n  ADD_POST,\n  DELETE_POST,\n  UPDATE_POST,\n  FIND_POST,\n} from \"./constants\";\nimport { PostsReducer } from \"../reducers/PostsReducer\";\nimport { useState } from \"react\";\n\nexport const PostContext = createContext();\n\nconst PostcontextProvider = ({ children }) => {\n  //State\n  const [postState, dispatch] = useReducer(PostsReducer, {\n    post: null,\n    posts: [],\n    postsLoading: true,\n  });\n  const [showAddPostModal, SetshowAddPostModal] = useState(false);\n  const [showUpdatePostModal, SetshowUpdatePostModal] = useState(false);\n  const [showToast, SetshowToast] = useState({\n    show: false,\n    message: \"\",\n    type: null,\n  });\n\n  //GetAllPost\n  const getPosts = async () => {\n    try {\n      const response = await axios.get(`${apiUrl}/posts`);\n      if (response.data.success) {\n        dispatch({ type: POSTS_LOADED_SUCCESS, payload: response.data.posts });\n      }\n    } catch (error) {\n      dispatch({ type: POSTS_LOADED_FAIL });\n    }\n  };\n  //Add Post\n  const addPost = async (newPost) => {\n    try {\n      const response = await axios.post(`${apiUrl}/posts`, newPost);\n      if (response.data.success) {\n        dispatch({ type: ADD_POST, payload: response.data.post });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data\n        ? error.reponse.data\n        : { success: false, message: \"Server error\" };\n    }\n  };\n  //Delete Post\n  const deletePost = async (PostID) => {\n    try {\n      const response = await axios.delete(`${apiUrl}/posts/${PostID}`);\n      if (response.data.success) {\n        dispatch({ type: DELETE_POST, payload: PostID });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  //Find post when user is updating\n  const findPost = (PostID) => {\n    const post = postState.posts.find((x) => x._id === PostID);\n    dispatch({ type: FIND_POST, payload: post });\n  };\n\n  //Update Post\n  const updatePost = async (updatePost) => {\n    try {\n      const response = await axios.put(\n        `${apiUrl}/posts/${updatePost._id}`,\n        updatePost\n      );\n      if (response.data.success) {\n        dispatch({ type: UPDATE_POST, payload: response.data.post });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data\n        ? error.reponse.data\n        : { success: false, message: \"Server error\" };\n    }\n  };\n  //Take away\n  const PostContextData = {\n    postState,\n    getPosts,\n    showAddPostModal,\n    SetshowAddPostModal,\n    addPost,\n    showToast,\n    SetshowToast,\n    deletePost,\n    updatePost,\n    findPost,\n    SetshowUpdatePostModal,\n    showUpdatePostModal,\n  };\n\n  return (\n    <PostContext.Provider value={PostContextData}>\n      {children}\n    </PostContext.Provider>\n  );\n};\n\nexport default PostcontextProvider;\n"]},"metadata":{},"sourceType":"module"}